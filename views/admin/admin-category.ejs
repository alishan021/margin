<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/admin/custom-css/admin-users.css"> -->
    <link rel="stylesheet" href="/admin/custom-css/navbar.css">
    <link rel="stylesheet" href="/admin/custom-css/sidebar.css">
    <link rel="stylesheet" href="/admin/custom-css/admin-category.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />


    <script src="/admin/custom-js/admin-category.js" defer></script>
    
</head>
<body>

    <div class="page-wrapper">

        <!-- Navbar starts here -->
        <%- include('./layouts/navbar.ejs') %>
        <!-- Navbar ends here -->

        <div class="page-body">

            <%- include('./layouts/sidebar.ejs') %> 

            <main>
                <div class="add-category-box">
                    <div class="add-category-div2">
                        <div class="msg-box">
                            <p class="msg-para"></p>
                        </div>
                        <form action="/admin/category" method="post">
                            <div class="input-item form-child">
                                <label for="category">Category : </label>
                                <input type="text" name="category" placeholder="chizel" category id="category" >
                                <button class="btn-update" type="button"></button>
                                <button class="btn-add-category">Add Category</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="user-list">
                    <div class="table-div">
                    <table class="content-table">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Category</th>
                                <th>Products</th>
                                <th>Status</th>
                                <th>Buttons</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Users prinst as a loop -->
                            <% categorys.forEach((category, index ) => {  %>

                            <tr>
                                <td><%= index + 1 %></td>
                                <td><%= category.categoryName %></td>

                                <td>
                                    <% products.forEach((product, index ) => {  %>
                                        <% if(product.category == category._id.toString() ){ %>
                                            <%= product.name %> <br>
                                        <% } %>
                                    <% }) %>
                                </td>

                                <td class="user-status <%= category.isActive ? 'list' : 'unlist' %>" >
                                    <span>
                                        <% if(category.isActive){ %> Listed
                                        <%} else { %> UnListed <% } %>
                                    </span>
                                </td>
                                <td>
                                    <button class="btn-list"    data-category-id="<%= category._id %>" ><i class="fa-solid fa-eye"></i></button>
                                    <button class="btn-unlist"  data-category-id="<%= category._id %>"><i class="fa-solid fa-eye-slash"></i></button>
                                    <button class="btn-delete"  data-category-id="<%= category._id %>"><i class="fa-solid fa-trash"></i></button>
                                    <button class="btn-edit"  data-category-id="<%= category._id %>"><i class="fa-solid fa-pen-to-square"></i></button>
                                </td>                               
                            </tr>

                            <% }) %>
                            <!-- Users loop ends -->
                           
                        </tbody>
                    </table>
                    </div>
                </div>
            </main>

        </div>
    </div>

    
</body>
</html>