<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/admin/custom-css/admin-users.css"> -->
    <link rel="stylesheet" href="/admin/custom-css/navbar.css">
    <link rel="stylesheet" href="/admin/custom-css/sidebar.css">
    <link rel="stylesheet" href="/admin/custom-css/admin-coupon.css">

    <script src="/admin/custom-js/admin-coupon.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>

    
</head>
<body>

    <div class="page-wrapper">

        <!-- Navbar starts here -->
        <%- include('./layouts/navbar.ejs') %>
        <!-- Navbar ends here -->

        <div class="page-body">

            <%- include('./layouts/sidebar.ejs') %> 

            <main>
                <div class="add-category-box">
                    <div class="add-category-div2">
                        <div class="msg-box">
                            <p class="msg-para"></p>
                        </div>
                    </div>
                </div>
                <div class="create-coupon">
                    <a href="/admin/coupon/add">Create new coupon</a>
                </div>
                <div class="user-list">
                    <div class="table-div">
                    <table class="content-table">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Coupon code</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Active</th>
                                <th>Purchase Amount</th>
                                <th>Discount Amount</th>
                                <th>Used count</th>
                                <th>Button</th>
                            </tr>
                        </thead>
                        <tbody>

                            <% coupons.forEach(( coupon, index  ) => { %>
                                <tr>
                                    <td><%= index + 1 %></td>
                                    <td><%= coupon.couponCode %></td>
                                    <td><%= coupon.startDate.toLocaleDateString() %></td>
                                    <td><%= coupon.endDate.toLocaleDateString() %></td>
                                    <td><%= coupon.isActive %></td>
                                    <td><%= coupon.purchaseAmount %></td>
                                    <td><%= coupon.discountAmount %></td>
                                    <td><%= coupon.usedUsers.length %></td>
                                    <td><button id="coupon-remove" data-coupon-id="<%= coupon._id %>">Remove</button></td>               
                                </tr>
                            <%}) %>

                           
                        </tbody>
                    </table>
                    </div>
                </div>
            </main>

        </div>
    </div>

    
</body>
</html>